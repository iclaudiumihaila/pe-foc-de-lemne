{"ast":null,"code":"var _jsxFileName = \"/Users/claudiu/Desktop/pe foc de lemne/frontend/src/contexts/CartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport React, { createContext, useContext, useEffect } from 'react';\nimport { useCart } from '../hooks/useCart';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nexport const useCartContext = () => {\n  _s();\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error('useCartContext must be used within a CartProvider');\n  }\n  return context;\n};\n_s(useCartContext, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const CartProvider = ({\n  children\n}) => {\n  _s2();\n  const cartData = useCart();\n\n  // Initialize cart validation on mount\n  useEffect(() => {\n    const initializeCart = async () => {\n      try {\n        await cartData.validateCart();\n      } catch (error) {\n        console.error('Error initializing cart:', error);\n      }\n    };\n    initializeCart();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Listen for storage changes to sync across tabs\n  useEffect(() => {\n    const handleStorageChange = e => {\n      if (e.key === 'cart' && e.newValue !== e.oldValue) {\n        // Cart was updated in another tab - reload the page to sync\n        window.location.reload();\n      }\n    };\n    window.addEventListener('storage', handleStorageChange);\n    return () => window.removeEventListener('storage', handleStorageChange);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: cartData,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\n\n// Higher-order component for cart integration\n_s2(CartProvider, \"F7retdZAGXsu/ntgEANtnRfnet0=\", false, function () {\n  return [useCart];\n});\n_c = CartProvider;\nexport const withCart = Component => {\n  var _s3 = $RefreshSig$();\n  return _s3(function CartWrappedComponent(props) {\n    _s3();\n    const cartContext = useCartContext();\n    return /*#__PURE__*/_jsxDEV(Component, {\n      ...props,\n      cart: cartContext\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 12\n    }, this);\n  }, \"5juFsMIvsWNZ4rIJGJDt/SWrsZo=\", false, function () {\n    return [useCartContext];\n  });\n};\n\n// Custom hook for cart operations with error handling\nexport const useCartOperations = () => {\n  _s4();\n  const cart = useCartContext();\n  const safeAddToCart = async (product, quantity = 1) => {\n    try {\n      cart.addToCart(product, quantity);\n      return {\n        success: true\n      };\n    } catch (error) {\n      console.error('Error adding to cart:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  };\n  const safeClearCart = async () => {\n    try {\n      cart.clearCart();\n      return {\n        success: true\n      };\n    } catch (error) {\n      console.error('Error clearing cart:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  };\n  return {\n    ...cart,\n    safeAddToCart,\n    safeClearCart\n  };\n};\n_s4(useCartOperations, \"K9pxcBfRVIz7fd4U/wMxd7nQsxQ=\", false, function () {\n  return [useCartContext];\n});\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useCart","jsxDEV","_jsxDEV","CartContext","useCartContext","_s","context","Error","CartProvider","children","_s2","cartData","initializeCart","validateCart","error","console","handleStorageChange","e","key","newValue","oldValue","window","location","reload","addEventListener","removeEventListener","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","withCart","Component","_s3","$RefreshSig$","CartWrappedComponent","props","cartContext","cart","useCartOperations","_s4","safeAddToCart","product","quantity","addToCart","success","message","safeClearCart","clearCart","$RefreshReg$"],"sources":["/Users/claudiu/Desktop/pe foc de lemne/frontend/src/contexts/CartContext.js"],"sourcesContent":["import React, { createContext, useContext, useEffect } from 'react';\nimport { useCart } from '../hooks/useCart';\n\nconst CartContext = createContext();\n\nexport const useCartContext = () => {\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error('useCartContext must be used within a CartProvider');\n  }\n  return context;\n};\n\nexport const CartProvider = ({ children }) => {\n  const cartData = useCart();\n  \n  // Initialize cart validation on mount\n  useEffect(() => {\n    const initializeCart = async () => {\n      try {\n        await cartData.validateCart();\n      } catch (error) {\n        console.error('Error initializing cart:', error);\n      }\n    };\n    \n    initializeCart();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  \n  // Listen for storage changes to sync across tabs\n  useEffect(() => {\n    const handleStorageChange = (e) => {\n      if (e.key === 'cart' && e.newValue !== e.oldValue) {\n        // Cart was updated in another tab - reload the page to sync\n        window.location.reload();\n      }\n    };\n    \n    window.addEventListener('storage', handleStorageChange);\n    return () => window.removeEventListener('storage', handleStorageChange);\n  }, []);\n  \n  return (\n    <CartContext.Provider value={cartData}>\n      {children}\n    </CartContext.Provider>\n  );\n};\n\n// Higher-order component for cart integration\nexport const withCart = (Component) => {\n  return function CartWrappedComponent(props) {\n    const cartContext = useCartContext();\n    return <Component {...props} cart={cartContext} />;\n  };\n};\n\n// Custom hook for cart operations with error handling\nexport const useCartOperations = () => {\n  const cart = useCartContext();\n  \n  const safeAddToCart = async (product, quantity = 1) => {\n    try {\n      cart.addToCart(product, quantity);\n      return { success: true };\n    } catch (error) {\n      console.error('Error adding to cart:', error);\n      return { success: false, error: error.message };\n    }\n  };\n  \n  const safeClearCart = async () => {\n    try {\n      cart.clearCart();\n      return { success: true };\n    } catch (error) {\n      console.error('Error clearing cart:', error);\n      return { success: false, error: error.message };\n    }\n  };\n  \n  return {\n    ...cart,\n    safeAddToCart,\n    safeClearCart\n  };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}