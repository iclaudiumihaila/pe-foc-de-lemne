{"ast":null,"code":"import _objectSpread from\"/Users/claudiu/Desktop/pe foc de lemne/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useEffect}from'react';import{useCart}from'../hooks/useCart';import{jsx as _jsx}from\"react/jsx-runtime\";const CartContext=/*#__PURE__*/createContext();export const useCartContext=()=>{const context=useContext(CartContext);if(!context){throw new Error('useCartContext must be used within a CartProvider');}return context;};export const CartProvider=_ref=>{let{children}=_ref;const cartData=useCart();// Initialize cart validation on mount\nuseEffect(()=>{const initializeCart=async()=>{try{await cartData.validateCart();}catch(error){console.error('Error initializing cart:',error);}};initializeCart();},[cartData.validateCart]);// Listen for storage changes to sync across tabs\nuseEffect(()=>{const handleStorageChange=e=>{if(e.key==='cart'&&e.newValue!==e.oldValue){// Cart was updated in another tab - reload the page to sync\nwindow.location.reload();}};window.addEventListener('storage',handleStorageChange);return()=>window.removeEventListener('storage',handleStorageChange);},[]);return/*#__PURE__*/_jsx(CartContext.Provider,{value:cartData,children:children});};// Higher-order component for cart integration\nexport const withCart=Component=>{return function CartWrappedComponent(props){const cartContext=useCartContext();return/*#__PURE__*/_jsx(Component,_objectSpread(_objectSpread({},props),{},{cart:cartContext}));};};// Custom hook for cart operations with error handling\nexport const useCartOperations=()=>{const cart=useCartContext();const safeAddToCart=async function(product){let quantity=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;try{cart.addToCart(product,quantity);return{success:true};}catch(error){console.error('Error adding to cart:',error);return{success:false,error:error.message};}};const safeClearCart=async()=>{try{cart.clearCart();return{success:true};}catch(error){console.error('Error clearing cart:',error);return{success:false,error:error.message};}};return _objectSpread(_objectSpread({},cart),{},{safeAddToCart,safeClearCart});};","map":{"version":3,"names":["React","createContext","useContext","useEffect","useCart","jsx","_jsx","CartContext","useCartContext","context","Error","CartProvider","_ref","children","cartData","initializeCart","validateCart","error","console","handleStorageChange","e","key","newValue","oldValue","window","location","reload","addEventListener","removeEventListener","Provider","value","withCart","Component","CartWrappedComponent","props","cartContext","_objectSpread","cart","useCartOperations","safeAddToCart","product","quantity","arguments","length","undefined","addToCart","success","message","safeClearCart","clearCart"],"sources":["/Users/claudiu/Desktop/pe foc de lemne/frontend/src/contexts/CartContext.js"],"sourcesContent":["import React, { createContext, useContext, useEffect } from 'react';\nimport { useCart } from '../hooks/useCart';\n\nconst CartContext = createContext();\n\nexport const useCartContext = () => {\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error('useCartContext must be used within a CartProvider');\n  }\n  return context;\n};\n\nexport const CartProvider = ({ children }) => {\n  const cartData = useCart();\n  \n  // Initialize cart validation on mount\n  useEffect(() => {\n    const initializeCart = async () => {\n      try {\n        await cartData.validateCart();\n      } catch (error) {\n        console.error('Error initializing cart:', error);\n      }\n    };\n    \n    initializeCart();\n  }, [cartData.validateCart]);\n  \n  // Listen for storage changes to sync across tabs\n  useEffect(() => {\n    const handleStorageChange = (e) => {\n      if (e.key === 'cart' && e.newValue !== e.oldValue) {\n        // Cart was updated in another tab - reload the page to sync\n        window.location.reload();\n      }\n    };\n    \n    window.addEventListener('storage', handleStorageChange);\n    return () => window.removeEventListener('storage', handleStorageChange);\n  }, []);\n  \n  return (\n    <CartContext.Provider value={cartData}>\n      {children}\n    </CartContext.Provider>\n  );\n};\n\n// Higher-order component for cart integration\nexport const withCart = (Component) => {\n  return function CartWrappedComponent(props) {\n    const cartContext = useCartContext();\n    return <Component {...props} cart={cartContext} />;\n  };\n};\n\n// Custom hook for cart operations with error handling\nexport const useCartOperations = () => {\n  const cart = useCartContext();\n  \n  const safeAddToCart = async (product, quantity = 1) => {\n    try {\n      cart.addToCart(product, quantity);\n      return { success: true };\n    } catch (error) {\n      console.error('Error adding to cart:', error);\n      return { success: false, error: error.message };\n    }\n  };\n  \n  const safeClearCart = async () => {\n    try {\n      cart.clearCart();\n      return { success: true };\n    } catch (error) {\n      console.error('Error clearing cart:', error);\n      return { success: false, error: error.message };\n    }\n  };\n  \n  return {\n    ...cart,\n    safeAddToCart,\n    safeClearCart\n  };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}